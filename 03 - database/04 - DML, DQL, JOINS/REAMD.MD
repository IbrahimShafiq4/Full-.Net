# ๐ SQL DML & DQL & JOINS

---

## ๐ข ุฃููุงู: DML

### **Data Manipulation Language**

ูุนูู ุฃูุงูุฑ **ุงูุชุนุงูู ูุน ุงูุฏุงุชุง ููุณูุง**
๐ ุฅุฏุฎุงู โ ุชุนุฏูู โ ุญุฐู

---

## 1๏ธโฃ INSERT

### ๐น Simple Insert

### ๐ Syntax

```sql
INSERT INTO TableName
VALUES (value1, value2, value3, ...)
```

> โ๏ธ ูุงุฒู ุงูููู ุชููู **ุจููุณ ุชุฑุชูุจ ุงูุฃุนูุฏุฉ ูู ุงูุฌุฏูู**

### ๐ Example

```sql
INSERT INTO Employee
VALUES ('Ibrahim', 'Shafiq', 1, '2000-03-17', 'Cairo', 'Male', 2000, NULL, NULL);
```

---

### ๐น Insert ูุน ุชุญุฏูุฏ ุงูุฃุนูุฏุฉ (ุฃูุถู)

### ๐ Syntax

```sql
INSERT INTO TableName (col1, col2, col3)
VALUES (val1, val2, val3)
```

### ๐ Example

```sql
INSERT INTO Employee (Fname, Lname, SSN, Superssn, Dno)
VALUES ('Muhmad', 'Shafiq', 1456, 321654, 10);
```

โ๏ธ ููุง ุชูุฏุฑ ุชุณูุจ ุฃุนูุฏุฉ
โ๏ธ ุงูุชุฑุชูุจ ูุด ููู ุทุงููุง ุงูุฃุนูุฏุฉ ูุญุฏุฏุฉ

---

### ๐น Insert Multiple Rows

### ๐ Syntax

```sql
INSERT INTO TableName
VALUES
 (..),
 (..),
 (..);
```

### ๐ Example

```sql
INSERT INTO Employee
VALUES 
('Mahmoud', 'Shafiq', 3, '1992-09-25', 'Cairo', 'Male', 100000, 223344, 10),
('Shafiq', 'Abd-Elshafy', 4, '1953-09-28', 'Cairo', 'Male', 1000000, 223344, 10);
```

---

## 2๏ธโฃ UPDATE

### ุชุนุฏูู ุจูุงูุงุช ููุฌูุฏุฉ

### ๐ Syntax

```sql
UPDATE TableName
SET column = value
WHERE condition;
```

> โ๏ธ **ุงูู WHERE ููู ุฌุฏุงู**
> ูู ุบูุฑู ููุนุฏูู ูู ุงูุฌุฏูู ๐ฑ

### ๐ Example

```sql
UPDATE Employee
SET Salary = 5000
WHERE SSN = 1;
```

---

### ๐น Update ุฃูุชุฑ ูู ุนููุฏ

```sql
UPDATE Employee
SET Salary = 1000000,
    Address = 'Maadi, Cairo'
WHERE SSN = 1456;
```

---

## 3๏ธโฃ DELETE

### ุญุฐู ุจูุงูุงุช

### ๐ Syntax

```sql
DELETE FROM TableName
WHERE condition;
```

### ๐ Example

```sql
DELETE FROM Employee
WHERE SSN = 9999;
```

### โ ุจุฏูู WHERE

```sql
DELETE FROM Employee;
```

โ๏ธ ูุญุฐู ูู ุงูุฏุงุชุง
โ ูุงูุฑุฌูุนุด ุงูู Identity

---

## 4๏ธโฃ TRUNCATE

### ูุณุญ ุงูุฌุฏูู ุจุงููุงูู

```sql
TRUNCATE TABLE Employee;
```

โ๏ธ ุฃุณุฑุน
โ๏ธ ุจูุฑุฌูุน ุงูู Identity
โ ูููุด WHERE
โ ููููุนุด ูุน FK

---

# ๐ต DQL

### **Data Query Language**

ูุนูู **ุนุฑุถ ุงูุจูุงูุงุช**

---

## 1๏ธโฃ SELECT

### ๐ Syntax

```sql
SELECT column1, column2
FROM TableName;
```

### ๐ Example

```sql
SELECT *
FROM Student;
```

---

## 2๏ธโฃ CONCAT & Alias

### ุฏูุฌ ุฃุนูุฏุฉ

```sql
SELECT St_Fname + ' ' + St_Lname AS FullName
FROM Student;
```

### ุฃู

```sql
SELECT CONCAT(St_Fname, ' ', St_Lname) AS [Student Name]
FROM Student;
```

---

## 3๏ธโฃ WHERE

### ููุชุฑุฉ ุงูุฏุงุชุง

```sql
SELECT *
FROM Student
WHERE St_Age > 23;
```

---

### BETWEEN

```sql
SELECT *
FROM Student
WHERE St_Age BETWEEN 21 AND 25;
```

---

### IN

```sql
SELECT *
FROM Student
WHERE St_Address IN ('Cairo', 'Alex');
```

---

### NOT IN

```sql
SELECT *
FROM Student
WHERE St_Address NOT IN ('Cairo', 'Alex');
```

---

### NULL

```sql
SELECT *
FROM Student
WHERE St_super IS NOT NULL;
```

---

## 4๏ธโฃ LIKE

### Pattern Matching

| Symbol | Meaning     |
| ------ | ----------- |
| `%`    | ุฃู ุนุฏุฏ ุญุฑูู |
| `_`    | ุญุฑู ูุงุญุฏ    |

### ๐ Examples

```sql
-- ุซุงูู ุญุฑู A
WHERE St_Fname LIKE '_A%';

-- ูุจุฏุฃ ุจู A ูููุชูู ุจู H
WHERE St_Fname LIKE 'A%H';

-- ููุชูู ุจู A
WHERE St_Fname LIKE '%A';
```

### Ranges

```sql
WHERE St_Fname LIKE '[A-H]%';
WHERE St_Fname LIKE '[^A-H]%';
```

---

## 5๏ธโฃ DISTINCT

```sql
SELECT DISTINCT St_Fname
FROM Student;
```

โ๏ธ ูููุน ุงูุชูุฑุงุฑ

---

## 6๏ธโฃ ORDER BY

```sql
SELECT St_Fname, St_Age
FROM Student
ORDER BY St_Age DESC;
```

---

## 7๏ธโฃ TOP

```sql
SELECT TOP(4) *
FROM Student;
```

---

# ๐ฃ JOINS

### ุฑุจุท ุฌุฏุงูู ุจุจุนุถ

---

## 1๏ธโฃ INNER JOIN

### ุงููุดุชุฑู ุจุณ

```sql
SELECT *
FROM Student s
INNER JOIN Department d
ON s.Dept_Id = d.Dept_Id;
```

---

## 2๏ธโฃ LEFT JOIN

### ูู ุงููู ุนูู ุงูุดูุงู

```sql
SELECT *
FROM Student s
LEFT JOIN Department d
ON s.Dept_Id = d.Dept_Id;
```

---

## 3๏ธโฃ RIGHT JOIN

```sql
SELECT *
FROM Student s
RIGHT JOIN Department d
ON s.Dept_Id = d.Dept_Id;
```

---

## 4๏ธโฃ FULL OUTER JOIN

```sql
SELECT *
FROM Student s
FULL JOIN Department d
ON s.Dept_Id = d.Dept_Id;
```

---

## 5๏ธโฃ CROSS JOIN

### Cartesian Product ๐

```sql
SELECT s.St_Fname, d.Dept_Name
FROM Student s
CROSS JOIN Department d;
```

---

## 6๏ธโฃ SELF JOIN

### ุฌุฏูู ูุน ููุณู

```sql
SELECT 
  CONCAT(e.Fname, ' ', e.Lname) AS Employee,
  CONCAT(m.Fname, ' ', m.Lname) AS Manager
FROM Employee e
JOIN Employee m
ON e.Superssn = m.SSN;
```

---

## 7๏ธโฃ Multi Table Join

```sql
SELECT 
  CONCAT(s.St_Fname, ' ', s.St_Lname) AS Student,
  c.Crs_Name,
  sc.Grade
FROM Student s
JOIN Stud_Course sc ON s.St_Id = sc.St_Id
JOIN Course c ON c.Crs_Id = sc.Crs_Id;
```

---

# ๐ด JOIN + DML (ููู ุฌุฏุงู)

---

## ๐ข INSERT + JOIN

### ุฅุฏุฎุงู ุจูุงูุงุช ูู ุฌุฏูู ูุฌุฏูู

```sql
INSERT INTO GraduateStudents (St_Id, Name)
SELECT St_Id, St_Fname
FROM Student
WHERE St_Age > 22;
```

---

## ๐ก UPDATE + JOIN

### ุชุนุฏูู ุจุงุณุชุฎุฏุงู ุฌุฏูู ุชุงูู

```sql
UPDATE s
SET s.St_Age = s.St_Age + 1
FROM Student s
JOIN Department d
ON s.Dept_Id = d.Dept_Id
WHERE d.Dept_Name = 'IT';
```

---

## ๐ด DELETE + JOIN

### ุญุฐู ุจูุงุกู ุนูู ุฌุฏูู ุชุงูู

```sql
DELETE s
FROM Student s
JOIN Department d
ON s.Dept_Id = d.Dept_Id
WHERE d.Dept_Name = 'HR';
```

---

## ๐ง ููุญูุธุงุช ูููุฉ

* `WHERE` ูุน `DELETE / UPDATE` = ุฃูุงู
* `ON` ูุน `JOIN`
* `WHERE` ููููุชุฑุฉ
* `CROSS JOIN` ุฎุทุฑ ูุน ุฏุงุชุง ูุจูุฑุฉ
* ุฏุงููุงู ุงุณุชุฎุฏู **JOIN syntax** ูุด ANSI ุงููุฏูู
